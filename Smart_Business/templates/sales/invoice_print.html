{# templates/sales/invoice_pdf.html #}
<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <style>
      body {
        font-family: DejaVu Sans, Arial, sans-serif;
        font-size: 12px;
      }
      h1,
      h2,
      h3,
      h4 {
        margin: 0 0 10px;
      }
      table {
        width: 100%;
        border-collapse: collapse;
        margin-bottom: 12px;
      }
      th,
      td {
        border: 1px solid #444;
        padding: 4px 6px;
      }
      th {
        background: #f0f0f0;
      }
    </style>
  </head>
  <body>
    <h2>Invoice {{ invoice.invoice_no }}</h2>
    <p>
      <strong>Business:</strong> {{ business.name }}<br />
      {% if invoice.customer %}
        <strong>Customer:</strong> {{ invoice.customer.name }}<br />
        {% if invoice.customer.phone %}
          ðŸ“ž {{ invoice.customer.phone }}<br />
        {% endif %}
        {% if invoice.customer.email %}
          ðŸ“§ {{ invoice.customer.email }}<br />
        {% endif %}
      {% endif %}
      <strong>Date:</strong> {{ invoice.date }}
    </p>

    <hr />

    <h3>Items</h3>
    <table>
      <thead>
        <tr>
          <th>Product</th>
          <th>UOM</th>
          <th>Qty</th>
          <th>Unit Price</th>
          <th>GST %</th>
          <th>Line Total</th>
        </tr>
      </thead>
      <tbody>
        {% for it in invoice.items.all %}
          <tr>
            <td>{{ it.product.name }}</td>
            <td>
              {{ it.uom|floatformat:'-2' }}
              {% if it.product.base_unit %}
                {{ it.product.base_unit }}
              {% endif %}
            </td>
            <td>{{ it.quantity|floatformat:'-2' }}</td>
            <td>â‚¹{{ it.unit_price }}</td>
            <td>{{ it.tax_percent }}%</td>
            <td>â‚¹{{ it.line_total }}</td>
          </tr>
        {% empty %}
          <tr>
            <td colspan="6">No items.</td>
          </tr>
        {% endfor %}
      </tbody>
    </table>

    <h3>Summary</h3>
    <table>
      <tr>
        <td>Subtotal (taxable):</td>
        <td>â‚¹{{ invoice.subtotal_taxable }}</td>
      </tr>
      <tr>
        <td>Subtotal (exempt):</td>
        <td>â‚¹{{ invoice.subtotal_exempt }}</td>
      </tr>
      <tr>
        <td>CGST:</td>
        <td>â‚¹{{ invoice.cgst_total }}</td>
      </tr>
      <tr>
        <td>SGST:</td>
        <td>â‚¹{{ invoice.sgst_total }}</td>
      </tr>
      <tr>
        <th>Total (with tax):</th>
        <th>â‚¹{{ invoice.total }}</th>
      </tr>
      <tr>
        <td>Amount Paid:</td>
        <td>â‚¹{{ invoice.amount_paid }}</td>
      </tr>
      <tr>
        <td>Remaining:</td>
        <td>â‚¹{{ invoice.remaining_amount }}</td>
      </tr>
    </table>
  </body>
</html>
